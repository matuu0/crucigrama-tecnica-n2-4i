<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
<title>Crucigrama ‚Äî M√©todos de prevenci√≥n</title>
<link rel="icon" href="data:;base64,iVBORw0KGgo=">

<style>
:root{
  --bg:#eaf6ff;
  --card:#ffffff;
  --muted:#5b6b7a;
  --accent:#5bb8f2;
  --accent-2:#2e9ad9;
  --success:#16a34a;
  --danger:#ef4444;
  --radius:14px;
  --shadow:0 8px 24px rgba(26,39,57,0.08);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
  background:linear-gradient(180deg,var(--bg),#dff4ff);
  color:#07304a;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:16px;
}

.wrap{
  width:100%;
  max-width:1100px;
  background:var(--card);
  padding:18px;
  border-radius:var(--radius);
  box-shadow:var(--shadow);
}

header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  flex-wrap:wrap;
}
h1{margin:0;font-size:20px;color:#05293e}
.subtitle{color:var(--muted);font-size:13px}

.grid{
  display:grid;
  grid-template-columns:1fr 340px;
  gap:16px;
  margin-top:12px;
}

/* üìå FIX SUPER IMPORTANTE ‚Äî IG compatible */
@media screen and (max-width: 650px){
  .grid{
    display:block !important;
  }
  aside{
    width:100% !important;
    margin-top:16px !important;
  }
  .entries{
    display:flex !important;
    flex-direction:column !important;
    width:100% !important;
  }
  .entry{
    width:100% !important;
    flex:none !important;
    padding:14px !important;
  }
  .wrap{
    padding:12px !important;
  }
}

/* TABLERO */
.board{
  background:#ffffff;
  padding:14px;
  border-radius:14px;
  border:1px solid rgba(8,58,86,0.05);
}
.entries{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
}
.entry{
  background:linear-gradient(180deg,#fbfeff,#eef8ff);
  padding:10px 12px;
  border-radius:12px;
  min-width:110px;
  flex:1 1 150px;
  text-align:center;
  font-weight:700;
  color:#03314a;
  cursor:pointer;
  border:1px solid rgba(10,74,110,0.06);
  transition:transform .12s ease,box-shadow .12s ease;
}
.entry:hover{
  transform:translateY(-3px);
  box-shadow:0 8px 18px rgba(46,154,217,0.09);
}
.num{font-size:12px;color:var(--muted)}
.val{margin-top:8px;letter-spacing:2px;font-size:15px}

/* PROGRESO */
.progressWrap{margin-top:14px}
.progressBar{
  height:12px;background:#d8eefc;border-radius:999px;overflow:hidden;
}
.progressFill{
  height:100%;width:0%;
  background:linear-gradient(90deg,var(--accent),var(--accent-2));
  transition:width .4s ease;
}

/* ESTAD√çSTICAS */
.stats{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
  margin-top:16px;
}
.statCard{
  background:#f8fcff;
  border-radius:12px;
  padding:10px;
  text-align:center;
  border:1px solid rgba(8,58,86,0.04);
}
.statCard .num{font-weight:800;font-size:18px;color:#023047}
.statCard .label{font-size:12px;color:var(--muted)}

.controls{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
.btn{
  background:var(--accent);
  color:white;
  border:none;
  padding:10px 12px;
  border-radius:12px;
  cursor:pointer;
  font-weight:700;
}
.btn.ghost{
  background:transparent;
  color:var(--accent-2);
  border:1px dashed rgba(7,48,74,0.15);
}
.btn.surrender{
  background:#ffb4b4;
  color:#7a1b1b;
}

/* PANEL */
.panel{
  background:#f7feff;
  padding:12px;
  border-radius:14px;
  border:1px solid rgba(8,58,86,0.05);
}
.hintTitle{
  font-weight:800;
  margin-bottom:8px;
  color:#06314a;
}
.clue{font-size:14px;color:#084159;margin-bottom:8px}
.log{
  background:#f1fbff;
  padding:8px;
  border-radius:10px;
  max-height:300px;
  overflow:auto;
  font-size:13px;
}

/* MODAL */
.modalBack{
  position:fixed;inset:0;
  background:rgba(2,14,20,0.4);
  display:none;
  align-items:center;
  justify-content:center;
  padding:12px;
}
.modal{
  width:100%;
  max-width:520px;
  background:white;
  padding:18px;
  border-radius:14px;
}
.formRow{
  display:flex;
  gap:8px;
  margin-top:10px;
}
input[type=text]{
  flex:1;padding:10px;
  border-radius:10px;
  border:1px solid rgba(8,58,86,0.12);
}
.msg{margin-top:8px;font-size:14px}
.msg.ok{color:var(--success)}
.msg.bad{color:var(--danger)}
footer{text-align:center;color:var(--muted);margin-top:16px;font-size:13px}
</style>
</head>

<body>
<div class="wrap">
<header>
  <div>
    <h1>Crucigrama ‚Äî M√©todos de prevenci√≥n</h1>
    <div class="subtitle">Dise√±o celeste ‚Äî 100% compatible con celular</div>
  </div>
</header>

<div class="grid">
<section>

<div class="board">
  <div class="entries" id="entries"></div>

  <div class="progressWrap">
    <div class="small">Progreso</div>
    <div class="progressBar">
      <div id="progressFill" class="progressFill"></div>
    </div>
  </div>

  <div class="stats">
    <div class="statCard"><div class="num" id="statAttempts">0</div><div class="label">Intentos</div></div>
    <div class="statCard"><div class="num" id="statCorrect">0</div><div class="label">Correctas</div></div>
    <div class="statCard"><div class="num" id="statIncorrect">0</div><div class="label">Incorrectas</div></div>
    <div class="statCard"><div class="num" id="statAccuracy">0%</div><div class="label">Porcentaje</div></div>
  </div>

  <div id="status" class="small" style="margin-top:8px;"></div>
</div>

<div class="controls">
  <button class="btn" id="startBtn">Jugar</button>
  <button class="btn ghost" id="rulesBtn">C√≥mo jugar</button>
  <button class="btn surrender" id="surrenderBtn">Rendirse (16)</button>
  <button class="btn" id="resetBtn">Reiniciar</button>
</div>

</section>

<aside>
<div class="panel">
  <div class="hintTitle">Pistas</div>
  <div id="clues"></div>

  <div class="small" style="margin-top:12px;">Registro</div>
  <div class="log" id="log"></div>
</div>
</aside>
</div>

<footer>Compatible con Instagram / TikTok / Facebook ‚Äî Celular y PC</footer>
</div>

<!-- MODAL -->
<div id="modalBack" class="modalBack">
 <div class="modal">
  <h3>Palabra #<span id="modalNum"></span></h3>
  <div class="small" id="modalClue"></div>

  <div class="formRow">
    <input id="answerInput" type="text" placeholder="Escrib√≠ la palabra completa">
    <button class="btn" id="submitAnswer">Enviar</button>
  </div>

  <div class="actions" style="margin-top:10px;text-align:right;">
    <button class="btn ghost" id="cancelBtn">Cancelar</button>
  </div>

  <div id="modalMsg" class="msg"></div>
 </div>
</div>

<script>
/* ------------------------ L√ìGICA ------------------------ */

function normalize(s){
  if(!s) return '';
  return s.normalize("NFKD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^a-z0-9]/g,'');
}

const accepted = {
  1:['diafragmas','diafragma'],
  2:['anillo'],
  3:['pastillas','pastilla'],
  4:['inyeccion','inyectable'],
  5:['infeccion'],
  6:['condon','condom'],
  7:['calendario'],
  8:['parche'],
  9:['sexualidad'],
  10:['espermicida'],
  11:['implante'],
  12:['diu','d i u'],
  13:['vasectomia'],
  14:['pildoras','pildora'],
  15:['abstinencia']
};
Object.keys(accepted).forEach(k => accepted[k] = accepted[k].map(normalize));

const replacements = {
  1:'D I A F R A G M A S',
  2:'A N I L L O',
  3:'P A S T I L L A S',
  4:'I N Y E C C I O N',
  5:'I N F E C C I O N',
  6:'C O N D O N',
  7:'C A L E N D A R I O',
  8:'P A R C H E',
  9:'S E X U A L I D A D',
  10:'E S P E R M I C I D A',
  11:'I M P L A N T E',
  12:'D I U',
  13:'V A S E C T O M I A',
  14:'P I L D O R A S',
  15:'A B S T I N E N C I A'
};

const clues = {
  1:'dispositivo de silicona con forma de c√∫pula que se inserta en la vagina',
  2:'m√©todo anticonceptivo flexible que va dentro de la vagina',
  3:'se toman el d√≠a despu√©s de tener relaciones sexuales',
  4:'inyectable hormonal aplicado cada 3 meses',
  5:'cuando ingresa un germen se produce una...',
  6:'funda delgada de l√°tex que se coloca sobre el pene',
  7:'m√©todo basado en registrar el ciclo menstrual',
  8:'libera hormonas a trav√©s de la piel',
  9:'modo en que cada persona vive deseo y afecto',
  10:'sustancia que destruye espermatozoides',
  11:'varilla peque√±a que se coloca bajo la piel',
  12:'pieza pl√°stica en forma de "T" que va en el √∫tero',
  13:'cirug√≠a que corta los conductos deferentes',
  14:'p√≠ldoras diarias que inhiben la ovulaci√≥n',
  15:'decisi√≥n de no tener relaciones sexuales'
};

const initial = {
  A:'_ _ A _ _ _ _ _ _',N:'_ N _ _ _',
  T:'_ _ _ T _ _ _ _ _',I1:'I _ _ _ _ _ _ _ _',
  C:'_ _ _ _ C _ _ _ _',O:'_ O _ _ _ _',
  N1:'_ _ _ _ N _ _ _ _ _',C1:'_ _ _ C _ _',
  E:'_ E _ _ _ _ _ _ _ _',P1:'_ _ P _ _ _ _ _ _ _ _',
  T1:'_ _ _ _ _ _ T _',I2:'_ I _',
  V:'V _ _ _ _ _ _ _ _ _',O1:'_ _ _ _ O _ _ _',
  S:'_ _ S _ _ _ _ _ _ _ _'
};

let state = {...initial, solvedCount:0};
let stats = {attempts:0,correct:0,incorrect:0};

const entriesEl = document.getElementById("entries");
const cluesEl = document.getElementById("clues");
const logEl = document.getElementById("log");
const progressFill = document.getElementById("progressFill");
const statusEl = document.getElementById("status");

const modalBack = document.getElementById("modalBack");
const modalNum = document.getElementById("modalNum");
const modalClue = document.getElementById("modalClue");
const modalMsg = document.getElementById("modalMsg");
const answerInput = document.getElementById("answerInput");
const submitAnswer = document.getElementById("submitAnswer");
const cancelBtn = document.getElementById("cancelBtn");

const statAttempts=document.getElementById("statAttempts");
const statCorrect=document.getElementById("statCorrect");
const statIncorrect=document.getElementById("statIncorrect");
const statAccuracy=document.getElementById("statAccuracy");

function renderEntries(){
  entriesEl.innerHTML="";
  const list=[
    {n:1,key:'A'},{n:2,key:'N'},{n:3,key:'T'},{n:4,key:'I1'},
    {n:5,key:'C'},{n:6,key:'O'},{n:7,key:'N1'},{n:8,key:'C1'},
    {n:9,key:'E'},{n:10,key:'P1'},{n:11,key:'T1'},{n:12,key:'I2'},
    {n:13,key:'V'},{n:14,key:'O1'},{n:15,key:'S'}
  ];
  list.forEach(item=>{
    const d=document.createElement("div");
    d.className="entry";
    d.innerHTML=`<div class='num'>#${item.n}</div><div class='val' id='val-${item.key}'>${state[item.key]}</div>`;
    d.onclick=()=>openModal(item.n);
    entriesEl.appendChild(d);
  });
}

function renderClues(){
  cluesEl.innerHTML="";
  for(let i=1;i<=15;i++){
    const c=document.createElement("div");
    c.className="clue";
    c.textContent=`${i}. ${clues[i]}`;
    cluesEl.appendChild(c);
  }
}

function updateStatsUI(){
  statAttempts.textContent=stats.attempts;
  statCorrect.textContent=stats.correct;
  statIncorrect.textContent=stats.incorrect;
  statAccuracy.textContent=(stats.attempts?Math.round(stats.correct/stats.attempts*100):0)+"%";

  const pct=Math.round(state.solvedCount/15*100);
  progressFill.style.width=pct+"%";
  statusEl.textContent=`Resueltas: ${state.solvedCount}/15`;
}

function log(msg,type){
  const d=document.createElement("div");
  d.textContent=msg;
  if(type==="err") d.style.color="var(--danger)";
  if(type==="ok") d.style.color="var(--success)";
  logEl.appendChild(d);
  logEl.scrollTop=logEl.scrollHeight;
}

let activeNum=null;

function openModal(n){
  activeNum=n;
  modalNum.textContent=n;
  modalClue.textContent=clues[n];
  modalMsg.textContent="";
  answerInput.value="";
  modalBack.style.display="flex";
  setTimeout(()=>answerInput.focus(),150);
}

function closeModal(){
  modalBack.style.display="none";
  activeNum=null;
}

function submitModal(){
  if(activeNum===null) return;
  let raw=answerInput.value.trim();
  if(!raw){
    modalMsg.textContent="Escrib√≠ una respuesta.";
    modalMsg.className="msg bad";
    return;
  }

  stats.attempts++;

  const norm=normalize(raw);
  if(accepted[activeNum].includes(norm)){
    stats.correct++;
    state.solvedCount++;
    state[ Object.keys(initial)[activeNum-1] ] = replacements[activeNum];

    document.getElementById(`val-${Object.keys(initial)[activeNum-1]}`).textContent=replacements[activeNum];
    modalMsg.textContent="¬°Correcto!";
    modalMsg.className="msg ok";

    log(`Correcto (#${activeNum}): ${raw}`,"ok");

    updateStatsUI();
    setTimeout(closeModal,600);
  }
  else{
    stats.incorrect++;
    log(`Incorrecto (#${activeNum}): ${raw}`,"err");
    modalMsg.textContent="Incorrecto.";
    modalMsg.className="msg bad";
    updateStatsUI();
  }
}

submitAnswer.onclick=submitModal;
answerInput.onkeydown=e=>{if(e.key==="Enter")submitModal();}
cancelBtn.onclick=closeModal;

document.getElementById("startBtn").onclick=()=>openModal(1);
document.getElementById("rulesBtn").onclick=()=>alert("C√≥mo jugar:\n1) Toc√° un n√∫mero.\n2) Escrib√≠ la palabra.\n3) Se actualiza al acertar.\n4) Bot√≥n 16 = rendirse.");
document.getElementById("surrenderBtn").onclick=()=>{
  if(confirm("¬øSeguro que quer√©s rendirte?")){ alert("Te rendiste"); }
};
document.getElementById("resetBtn").onclick=()=>{
  if(confirm("¬øReiniciar juego?")) location.reload();
};

renderEntries();
renderClues();
updateStatsUI();
log("Juego listo ‚Äî toc√° un n√∫mero para comenzar.");
</script>

</body>
</html>
